<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JouwWebHeld - Factuur</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            padding: 0;
            margin: 0;
            position: relative;
            box-sizing: border-box;
        }

        html {
            font-size: 100%;
            height: 100%;
        }

        body {
            font-family: "Montserrat", Arial, sans-serif;
            height: 100%;
            padding: 2em;
        }

        header {
            flex: 0 0 auto;
        }

        main {
            flex: 1 1 100%;
        }

        footer {
            flex: 0 0 auto;
        }

        input {
            font-family: "Montserrat", Arial, sans-serif;
            font-size: 100%;
            padding: .25em;
            border: 1px solid #ccc;
        }

        .jouwwebheld-info {
            text-align: right;
        }

        picture {
            width: 100%;
        }

        picture svg {
            width: 100%;
        }

        .client-info {
            margin-top: 2em;
        }

        .client-info > * + * {
            margin-top: .5em;
        }

        .page {
            width: 210mm;
            height: 297mm;
            padding: 1.5cm;
            display: flex;
            flex-direction: column;
            margin: 0 auto;
            box-shadow: 0 1px 1px rgb(0 0 0 / 24%), 0 3px 3px rgb(0 0 0 / 20%), 0 6px 6px rgb(0 0 0 / 16%), 0 12px 12px rgb(0 0 0 / 12%);
        }

        table {
            border-collapse: collapse;
        }

        th {
            white-space: nowrap;
            text-align: left;
        }

        thead th + th,
        tbody th + th,
        thead td + td,
        tbody td + td {
            border-left: 1px solid #ccc;
        }

        th span {
            display: block;
            font-size: .8em;
            font-weight: normal;
        }

        th,
        td {
            padding: .25em;
        }

        tfoot td {
            text-align: right;
        }

        @media print {
            input {
                border: none;
                padding: 0;
            }

            .page {
                box-shadow: none;
                width: 100%;
                height: 100%;
                padding: 0;
            }

            .client-info > * + * {
                margin-top: 0;
            }
        }
    </style>
</head>
<body>
    <div class="page">
        <header>
            <div class="jouwwebheld-info">
                <div style="display: inline-block; width: 266px;">
                    <picture>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 386 100"><path d="M308.873 10.59a4.608 4.608 0 01.12 3.298c-.186.576-.464.955-1.186 1.636-.835.787-1.044.914-1.897 1.083-2.424.498-4.65-.815-5.297-3.1-.197-.732-.08-2.23.232-2.948.375-.8 1.62-1.975 2.429-2.29 2.204-.832 4.656.198 5.599 2.32z"/><path d="M316.808 20.38c.017 1.866-.934 2.104-8.675 2.203-5.512.068-12.149.49-13.675.893-.72.185-2.09.653-3.082 1.048-.993.395-1.886.72-1.983.717-.11.009-.404-.279-.647-.637-.395-.569-.403-.702-.165-.998.252-.308.208-.479-.34-1.585-.64-1.303-.995-1.58-1.431-1.168-.212.2-.19.248-.862-1.588l-.931-3.116 1.63-1.309 1.294-.725c.702-.403 1.664-1.005 2.098-1.343l.817-.606-1.504-.323c-.843-.17-1.698-.328-1.903-.37-.385-.06-.45.095-1.468 2.984-.951 2.685-1.133 3.092-1.59 3.381-1.8.553-1.006 1.128-.812-.701l1.143 3.073c.462 1.164.502 1.432.266 1.655-.362.34-.321.608.168 1.676.48.983.977 1.386 1.456 1.145.246-.114.378-.073.516.173.103.185.324.494.5.68.306.325.293.337-.463.932-.806.642-1.29 1.452-3.376 5.678-1.12 2.256-1.922 2.753-4.872 2.994-.983.08-3.206.317-4.896.521-2.394.305-3.254.316-3.708.11-1.483-.65-1.576-2.82-.136-3.614.197-.115 2.259-.624 4.575-1.137l4.205-.93.869-2.772c.468-1.525.884-2.905.937-3.05.204-.756-.611-.623-6.18.981-3.066.891-6.499 1.892-7.623 2.223-1.124.354-2.294.586-2.62.54-1.29-.195-2.029-1.804-1.375-3.032.358-.644.285-.622 6.915-3.297 11.324-4.56 11.447-4.629 11.459-5.04.019-.654 1.239-5.475 1.782-7.07 1.046-3.033 1.705-3.183 8.842-2.1 3.689.568 3.797.608 5.253 2.152l1.233 1.309-.073 1.245c-.057.689.036 1.66.178 2.161.54 1.845 2.127 3.43 3.976 3.969.504.16 2.935.268 5.671.3 8.366.065 7.472-.01 8.071.626.388.41.536.718.536 1.142z"/><path d="M293.026 5.01c-10.962-1.612-11.82-.276-13.91 8.228-.277 2.663-8.986 5.272-11.306 6.217-4.413 1.034.861-1.788-6.084-4.589-2.441-.992.455-3.132-.645-3.682-2.546-1.273-3.341-1.315-2.546-3.82.838-2.637 0-2.545-2.074-4.595C256.42 1.7 257.867-.036 259.1 0c10.075 4.348 22.719 1.532 35.061 5.092.082.087-.425.048-1.136-.082z"/><path d="M0 94.59q2.488-.99 4.213-2.602 1.753-1.612 2.573-4.497.594-2.121.735-4.95.17-2.856.17-9.134v-25.85h10.858v25.708l.028 3.45q.029 1.075.029 3.112 0 5.147-.594 8.116-.764 3.875-3.506 6.647-2.715 2.8-6.136 4.157-3.393 1.357-6.023 1.244zM22.423 74.199q0-5.176 2.092-8.824 2.12-3.677 5.882-5.572 3.76-1.894 8.709-1.894 5.626 0 9.217 2.234t5.203 5.996q1.64 3.76 1.64 8.54 0 5.204-2.092 8.91-2.093 3.676-5.853 5.57-3.761 1.895-8.71 1.895-5.654 0-9.245-2.234-3.592-2.262-5.232-6.024-1.611-3.79-1.611-8.597zm21.857.452q0-4.299-1.272-6.872-1.245-2.602-4.1-2.602-3.054 0-4.327 2.206-1.272 2.178-1.272 6.76 0 4.383 1.272 7.041 1.301 2.659 4.157 2.659 3.025 0 4.27-2.206 1.272-2.235 1.272-6.986zM87.966 58.361v32.693h-7.578q-1.074 0-1.527-.339-.424-.311-.424-1.3v-1.358q-1.696 1.3-4.41 2.149-2.687.848-4.977.848-4.496 0-6.9-1.697-2.375-1.696-3.195-4.638-.82-2.94-.82-7.41V58.362h10.49v19.203q0 2.376.453 3.677.452 1.3 1.357 1.81.933.48 2.46.48 1.357 0 2.658-.452 1.3-.48 1.923-1.046V58.36zM141.266 58.361l-10.15 32.693h-9.19l-4.694-15.865-1.216-6.081-1.244 6.08-4.524 15.866h-9.473L90.737 58.361h10.208l3.308 13.038 1.725 8.428 1.951-8.428 3.817-13.038h9.416l3.79 13.038 1.837 8.428 1.697-8.456 3.053-13.01zM186.762 90.885H176.16L170.645 68.4l-1.357-8.993-1.245 9.021-5.457 22.456h-10.405l-11.31-43.327h10.8l4.497 24.039 1.329 10.266 1.555-10.266 5.683-24.04h9.812l5.853 24.04 1.583 9.7c11.141-51.003 55.76-48.363 78.519-53.833-29.74 9.523-63.51 5.634-73.74 63.42z"/><path d="M226.043 71.003q0 3.563-.339 5.939h-18.916q.339 3.507 2.375 5.119 2.036 1.584 5.683 1.584 2.29 0 4.864-.481 2.601-.51 3.789-1.16l1.611 5.572q-1.753 1.414-5.202 2.46-3.45 1.018-7.522 1.018-5.146 0-8.765-1.98-3.591-2.007-5.458-5.74-1.838-3.762-1.838-8.994 0-4.723 1.923-8.456 1.923-3.733 5.57-5.854 3.676-2.121 8.681-2.121 5.938 0 9.699 2.97 3.789 2.969 3.845 10.124zm-9.698.707q.028-.424.028-1.216 0-2.97-.99-4.384-.96-1.442-3.11-1.442-2.347 0-3.676 1.612-1.329 1.584-1.725 5.43zM248.664 57.909q3.535 0 6.419 1.725 2.912 1.697 4.637 5.175 1.725 3.45 1.725 8.485 0 5.401-2.12 9.474-2.093 4.044-5.967 6.25-3.846 2.178-8.992 2.178-3.11 0-6.447-.453-3.336-.424-5.768-1.018-2.432-.594-2.856-.933V43.627h10.49V55.25l-.226 5.911q3.563-3.252 9.105-3.252zm1.838 15.894q0-4.44-1.414-6.279-1.414-1.838-4.015-1.838-1.527 0-2.997.537-1.442.51-2.29 1.16v15.81q.848.96 4.41.96 1.81 0 3.252-1.215 1.442-1.216 2.234-3.564.82-2.347.82-5.571zM275.922 47.558v17.45h14.76v-17.45h10.745v43.044h-10.745V72.756h-14.76v17.846h-10.83V47.558zM334.849 71.003q0 3.563-.34 5.939h-18.916q.34 3.507 2.375 5.119 2.036 1.584 5.684 1.584 2.29 0 4.863-.481 2.602-.51 3.79-1.16l1.61 5.572q-1.752 1.414-5.202 2.46-3.45 1.018-7.521 1.018-5.146 0-8.766-1.98-3.59-2.007-5.457-5.74-1.838-3.762-1.838-8.994 0-4.723 1.923-8.456 1.923-3.733 5.57-5.854 3.676-2.121 8.68-2.121 5.939 0 9.7 2.97 3.788 2.969 3.845 10.124zm-9.699.707q.028-.424.028-1.216 0-2.97-.99-4.384-.96-1.442-3.11-1.442-2.346 0-3.675 1.612-1.33 1.584-1.725 5.43zM349.609 43.598v47.004h-10.49V43.598zM386 43.598v47.456h-8.03q-.764 0-1.16-.396-.395-.395-.395-1.13v-2.292q-3.733 3.818-9.756 3.818-3.534 0-6.447-1.725-2.884-1.725-4.609-5.204-1.724-3.506-1.724-8.54 0-5.402 2.035-9.39 2.036-3.988 5.74-6.137 3.733-2.15 8.653-2.15 3.025 0 5.344.793l-.113-3.45V43.597zm-21.15 31.59q0 4.271 1.385 6.166 1.386 1.866 4.015 1.866 1.442 0 2.913-.424 1.47-.452 2.375-1.074V66.025q-1.244-.876-4.411-.876-1.866 0-3.28 1.13-1.414 1.132-2.206 3.395-.791 2.234-.791 5.515z"/></svg>
                    </picture>

                    <table style="margin-top: .5em;">
                        <tr>
                            <th>E-mail</th>
                            <td>info@jouwwebheld.nl</td>
                        </tr>
                        <tr>
                            <th>IBAN</th>
                            <td>NL44 ASNB 0781 1508 76</td>
                        </tr>

                        <tr>
                            <th>BIC</th>
                            <td>ASNBNL21</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="client-info u-lobowl">
                <div>
                    <input type="text" style="font-weight: bold;" value="Wereldwinkel Lochem">
                </div>

                <div>
                    T.a.v. <input type="text" value="D. Witjes">
                </div>

                <div>
                    <input type="text" value="Walderstraat 17">
                </div>

                <div>
                    <input type="text" value="7241BH Lochem">
                </div>
            </div>
        </header>

        <main style="margin-top: 2em;">
            <div>
                <h1>Factuur: <span><span data-usedate="todaycondensed"></span>/<input type="text" style="width:4em; font-weight: bold;"></span></h1>
                <p>Factuurdatum: <strong data-usedate="today"></strong><Br>Vervaldatum: <strong data-usedate="thirtydays"></strong></p>
                <p>Betreft: <input type="text" style="width: 75%"></p>
            </div>

            <div style="margin-top: 2em;">
                <table>
                    <thead>
                        <tr>
                            <th scope="col">Aantal uren</th>
                            <th scope="col" style="width: 100%;">Beschrijving</th>
                            <th scope="col">Bedrag <span>excl. BTW</span></th>
                            <th scope="col">Bedrag <span>incl. BTW</span></th>
                        </tr>
                    </thead>

                    <tbody class="tasklist">
                        <tr class="task">
                            <td><input type="number" style="width:3em;" class="taskhours"></td>
                            <td><input type="text" style="width: 100%"></td>
                            <td style="white-space: nowrap;"><span class="taskprice-notax"></span></td>
                            <td style="white-space: nowrap;"><span class="taskprice-tax"></span></td>
                        </tr>
                    </tbody>

                    <tfoot>
                        <tr>
                            <td colspan="3">Totaalbedrag excl. BTW</td>
                            <td class="totalprice-notax"></td>
                        </tr>

                        <tr>
                            <td colspan="3">BTW hoog (21,0%)</td>
                            <td class="total-tax"></td>
                        </tr>

                        <tr>
                            <td colspan="3"><strong>Totaalbedrag incl. BTW</strong></td>
                            <td class="totalprice-tax"></td>
                        </tr>
                    </tfoot>
                </table>

                <button class="addtask">+</button>
            </div>
        </main>

        <footer>
            <p>Gelieve dit bedrag van <strong class="totalprice-tax"></strong> over te maken voor <strong data-usedate="thirtydays"></strong> op rekeningnummer: NL44 ASNB 0781 1508 76 t.n.v. R. van der Elst o.v.v. <input type="text">.</p>
        </footer>
    </div>

    <script>
        (function() {
            function QS(el) {
                return document.querySelector(el);
            }

            function QSA(el) {
                return document.querySelectorAll(el);
            }

            const rate = '45';
            const tax = 1.21;

            // Set dates

            const today = new Intl.DateTimeFormat('nl-NL', { day: '2-digit', month: '2-digit', year: 'numeric' }).format(new Date());

            const todaycondensed = today.split('-').reverse().join('');

            const thirtydays = new Date();
            thirtydays.setDate(thirtydays.getDate() + 30);

            const paymentdate = new Intl.DateTimeFormat('nl-NL', { day: '2-digit', month: '2-digit', year: 'numeric' }).format(thirtydays);

            [].forEach.call(QSA('[data-usedate]'), function (anchor, i) {
                switch (anchor.dataset.usedate) {
                    case "today":
                        anchor.innerHTML = today;
                        break;

                    case "todaycondensed":
                        anchor.innerHTML = todaycondensed;
                        break;

                    case "thirtydays":
                        anchor.innerHTML = paymentdate;
                        break;
                }
            });

            // Tasks

            document.documentElement.addEventListener('input', function (e) {
                let target = e.target;

                const formatter = new Intl.NumberFormat('nl-NL', {
                  style: 'currency',
                  currency: 'EUR',
                });

                if (target.classList.contains('taskhours')) {
                    target.closest('tr').querySelector('.taskprice-notax').innerHTML = formatter.format(e.target.value * (rate / tax));
                    target.closest('tr').querySelector('.taskprice-tax').innerHTML = formatter.format(e.target.value * rate);
                }

                // Calculate total price
                let totalnotax = 0;
                [].forEach.call(QSA('.taskprice-notax'), function (anchor) {
                    var price = Number(anchor.innerHTML.replace(/[^0-9]+/g,""));

                    totalnotax += price;
                });

                QS('.totalprice-notax').innerHTML = formatter.format(totalnotax / 100);

                // Calculate total price
                let totaltax = 0;
                [].forEach.call(QSA('.taskprice-tax'), function (anchor) {
                    var price = Number(anchor.innerHTML.replace(/[^0-9]+/g,""));

                    totaltax += price;
                });

                [].forEach.call(QSA('.totalprice-tax'), function (anchor) {
                    anchor.innerHTML = formatter.format(totaltax / 100);
                });


                // Calculate BTW
                QS('.total-tax').innerHTML = formatter.format((totaltax - totalnotax) / 100);
            });

            // Add new task

            QS('.addtask').addEventListener('click', function() {
                let newtask = QS('.task').innerHTML;

                QS('.tasklist').insertAdjacentHTML('beforeend', newtask);
            });
        }());
    </script>
</body>
</html>
